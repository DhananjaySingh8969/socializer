{function successMsg(e){new Noty({theme:"relax",text:e,type:"success",layout:"topRight",timeout:1500}).show()}function errorMsg(e){new Noty({theme:"relax",text:e,type:"error",layout:"topRight",timeout:1500}).show()}let e=function(){let e=$("#new-post-form");e.submit((function(n){n.preventDefault(),$.ajax({type:"POST",url:"/post/create",data:e.serialize(),success:function(n){let s=creatNewPost(n.data);$(".post-container").prepend(s),$("textarea",e).val(""),successMsg("post created successfully!"),addComment($(`.comment-section #newCmt${n.data._id} form`,s)),t($(".dlt-btn-container a",s)),postLikeBtn($(".comment-section p .postLikeBtn",s))},error:function(e){console.log("ERROR in creating post",e.responseText),errorMsg(e.responseText)}})}))},t=function(e){$(e).click((function(t){console.log("gotCliced",e,$(e)),t.preventDefault(),$.ajax({type:"GET",url:$(e).prop("href"),success:function(e){$("#post-item"+e.data).remove(),successMsg("post deleted successfully!")},error:function(e){console.log("error in deletePostHelper",e),errorMsg(e.responseText)}})}))};function deletePost(){let e=$(".dlt-btn-container a");for(let n of e)t(n)}function creatNewPost(e){return $(`\n       <div class="list-group-item list-group-item-action post-item" id="post-item${e._id}">\n            <div class="d-flex w-100 justify-content-between">\n                <div class="m-1  dlt-btn-container">\n                    <small class="user-profile-image">\n                        <img src="${e.user.avatar}">\n                    </small>\n                    <h3 class="d-inline capitalize">${e.user.name}</h3>\n                    <a class="btn btn-secondary btn-danger d-inline " href="/post/destroy/${e._id}" role="button" aria-expanded="false" >\n                            Delete\n                    </a>\n                </div>\n                <small>${e.createdAt}</small>\n            </div>\n            <p class="mb-1 overflow-auto inset-text">${e.content}</p>\n            <div class="comment-section">\n                <p class="btn-group" role="group">\n                    <a href="/likes/toggle/?id=${e._id}&type=Post" type="button" class="btn btn-secondary postLikeBtn"><i class="fas fa-thumbs-up w-like"></i> <span>${e.likes.length}</span> Likes</a>\n                    <a class="btn btn-secondary comments-drop-down" data-toggle="collapse" href="#post${e._id}" role="button" aria-expanded="false" aria-controls="post${e._id}">\n                        comments\n                    </a>  \n                </p>\n                <div class="collapse show" id="post${e._id}">\n                    <div class="create-comment">\n                        <p>\n                            <a class="btn btn-outline-primary add-comment-btn" data-toggle="collapse" href="#newCmt${e._id}" role="button" aria-expanded="false" aria-controls="newCmt${e._id}">\n                            add comment+\n                            </a>\n                        </p>\n                        <div class="collapse" id="newCmt${e._id}">\n                            <form method="POST" action="/comment/create">\n                                <div class="mb-3">\n                                    <textarea name="content" class="form-control"  placeholder="comment here.." required></textarea>\n                                    <input type="hidden" name="postId" value="${e._id}">\n                                    <button class="btn btn-dark comment-submit-btn" type="submit">submit</button>\n                                </div>\n                            </form>\n                        </div>\n                    </div>\n                    <div class="comments-contianer">\n                        <ol>\n                        </ol>\n                    </div> \n                </div>\n            </div> \n       </div>\n       `)}e(),deletePost()}